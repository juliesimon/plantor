<div class="dashboard-container">
  <div class="profile-dash text-center">
    <div class="main-dash">
      <div class="main-content">
        <h3>My Dashboard</h2>
        <%= image_tag "https://kitt.lewagon.com/placeholder/users/Alexialet", class: "img-circle" %>
        <p><%= @user.email %></p>
        <%= link_to 'See all my plants', user_path(current_user) %>
        <%= link_to 'Complete your profile', user_path(current_user), class: "btn-green" %>
        <%= link_to 'See all my plants', user_path(current_user), class: "btn-green" %>
        <p> <%= Time.now.strftime("%b %d, %Y") %></p>
      </div>
    </div>
    <div class="current">
      <div class="pending-bookings">
        <h3>
          Pending Plants
          <% count = 0 %>
          <% @bookings.each do |booking| %>
            <% count += 1 if booking.status == "pending" %>
          <% end %>
          (<%= count %>)
        </h3>
        <ul>
          <li class="booking">
            <div class="pending-booking-user-photo"></div>
            <div class="pending-booking-plant-photo"></div>
            <div class="pending-booking-plant"><strong>Plant</strong></div>
            <div class="pending-booking-user"><strong>Renter</strong></div> <!-- ADD NAME INSTEAD -->
            <div class="pending-booking-dates">
              <div class="pending-booking-start"><strong>From</strong></div>
              <div class="pending-booking-end"><strong>To</strong></div>
            </div>
          </li>
          <% @bookings.each do |booking| %>
            <% if booking.status == "pending" %>
              <li class="booking">
                <div class="pending-booking-plant-photo"><%= cl_image_tag booking.plant.photo, crop: :fill %></div>
                <div class="pending-booking-user-photo"><%= image_tag('https://cours-informatique-gratuit.fr/wp-content/uploads/2014/05/compte-utilisateur-1.png') %></div> <!-- ADD USER PHOTO -->
                <div class="pending-booking-plant"><%= booking.plant.name %></div>
                <div class="pending-booking-user"><%= booking.plant.user.email %></div> <!-- ADD NAME INSTEAD -->
                <div class="pending-booking-dates">
                  <div class="pending-booking-start"><%= booking.starts_at.strftime("%b %d, %Y") %></div>
                  <div class="pending-booking-end"><%= booking.ends_at.strftime("%b %d, %Y") %></div>
                </div>
              </li>
            <% end %>
          <% end %>
        </ul>
        <!-- <ul>
          <% @plants.each do |plant| %>
            <% plant.bookings.each do |booking| %>
              <% if booking.status == "pending"%>
                <li>
                  <%= booking.user.email %>
                  wants to rent your
                  <strong><%= plant.name %></strong>
                  from
                  <strong><%= booking.starts_atif booking.status == "pending" %> %></strong>
                  to
                  <strong><%= booking.ends_at.strftime("%b %d, %Y") %></strong>.
                  <%= link_to '<i class="fa fa-check" aria-hidden="true"></i>'.html_safe, accept_booking_path(booking), method: :patch, id: "validate-green"%>
                  <%= link_to '<i class="fa fa-times" aria-hidden="true"></i>'.html_safe, decline_booking_path(booking), method: :patch, id: "delete-red" %>
                </li>
              <% end %>
            <% end %>
          <% end %>
        </ul> -->
      </div>
    </div>
    <div class="past">
      <div class="pending-bookings">
        <h3>
          Current Plants
          <% count = 0 %>
          <% @bookings.each do |booking| %>
            <% count += 1 if booking.status == "accepted" && (booking.starts_at < Time.now) && (Time.now < booking.ends_at) %>
          <% end %>
          (<%= count %>)
        </h3>
        <ul>
          <li class="booking">
            <div class="pending-booking-user-photo"></div>
            <div class="pending-booking-plant-photo"></div>
            <div class="pending-booking-plant"><strong>Plant</strong></div>
            <div class="pending-booking-user"><strong>Renter</strong></div> <!-- ADD NAME INSTEAD -->
            <div class="pending-booking-dates">
              <div class="pending-booking-start"><strong>From</strong></div>
              <div class="pending-booking-end"><strong>To</strong></div>
            </div>
          </li>
          <% @bookings.each do |booking| %>
            <% if booking.status == "accepted" && (booking.starts_at < Time.now) && (Time.now < booking.ends_at) %>
              <li class="booking">
                <div class="pending-booking-plant-photo"><%= cl_image_tag booking.plant.photo, crop: :fill %></div>
                <div class="pending-booking-user-photo"><%= image_tag('https://cours-informatique-gratuit.fr/wp-content/uploads/2014/05/compte-utilisateur-1.png') %></div> <!-- ADD USER PHOTO -->
                <div class="pending-booking-plant"><%= booking.plant.name %></div>
                <div class="pending-booking-user"><%= booking.plant.user.email %></div> <!-- ADD NAME INSTEAD -->
                <div class="pending-booking-dates">
                  <div class="pending-booking-start"><%= booking.starts_at.strftime("%b %d, %Y") %></div>
                  <div class="pending-booking-end"><%= booking.ends_at.strftime("%b %d, %Y") %></div>
                </div>
              </li>
            <% end %>
          <% end %>
        </ul>
        <!-- <ul>
          <% @plants.each do |plant| %>
            <% plant.bookings.each do |booking| %>
              <% if booking.status == "accepted"%>
                  <% if (booking.starts_at < Time.now) && (Time.now < booking.ends_at) %>
                    <li> <strong><%= plant.name %></strong> is booked from <%= booking.starts_at.strftime("%b %d, %Y") %> to <%= booking.ends_at.strftime("%b %d, %Y") %></li>
                  <% end %>
              <% end %>
            <% end %>
          <% end %>
        </ul> -->
      </div>
    </div>
  </div>
</div>
